font = {
"5x8" : [
    bytearray(b'\x00\x00\x00\x00\x00'), # 20
    bytearray(b'\x00\x00\x5f\x00\x00'), # 21 !
    bytearray(b'\x00\x07\x00\x07\x00'), # 22 "
    bytearray(b'\x14\x7f\x14\x7f\x14'), # 23 #
    bytearray(b'\x24\x2a\x7f\x2a\x12'), # 24 $
    bytearray(b'\x23\x13\x08\x64\x62'), # 25 %
    bytearray(b'\x36\x49\x55\x22\x50'), # 26 &
    bytearray(b'\x00\x05\x03\x00\x00'), # 27 '
    bytearray(b'\x00\x1c\x22\x41\x00'), # 28 (
    bytearray(b'\x00\x41\x22\x1c\x00'), # 29 )len
    bytearray(b'\x14\x08\x3e\x08\x14'), # 2a *
    bytearray(b'\x08\x08\x3e\x08\x08'), # 2b +
    bytearray(b'\x00\x50\x30\x00\x00'), # 2c ,
    bytearray(b'\x08\x08\x08\x08\x08'), # 2d -
    bytearray(b'\x00\x60\x60\x00\x00'), # 2e .
    bytearray(b'\x20\x10\x08\x04\x02'), # 2f /
    bytearray(b'\x3e\x51\x49\x45\x3e'), # 30 0
    bytearray(b'\x00\x42\x7f\x40\x00'), # 31 1
    bytearray(b'\x42\x61\x51\x49\x46'), # 32 2
    bytearray(b'\x21\x41\x45\x4b\x31'), # 33 3
    bytearray(b'\x18\x14\x12\x7f\x10'), # 34 4
    bytearray(b'\x27\x45\x45\x45\x39'), # 35 5
    bytearray(b'\x3c\x4a\x49\x49\x30'), # 36 6
    bytearray(b'\x01\x71\x09\x05\x03'), # 37 7
    bytearray(b'\x36\x49\x49\x49\x36'), # 38 8
    bytearray(b'\x06\x49\x49\x29\x1e'), # 39 9
    bytearray(b'\x00\x36\x36\x00\x00'), # 3a :
    bytearray(b'\x00\x56\x36\x00\x00'), # 3b ;
    bytearray(b'\x08\x14\x22\x41\x00'), # 3c <
    bytearray(b'\x11\x11\x11\x11\x11'), # 3d =
    bytearray(b'\x00\x41\x22\x14\x08'), # 3e >
    bytearray(b'\x02\x01\x51\x09\x06'), # 3f ?
    bytearray(b'\x32\x49\x79\x41\x3e'), # 40 @
    bytearray(b'\x7e\x11\x11\x11\x7e'), # 41 A
    bytearray(b'\x7f\x49\x49\x49\x36'), # 42 B
    bytearray(b'\x3e\x41\x41\x41\x22'), # 43 C
    bytearray(b'\x7f\x41\x41\x22\x1c'), # 44 D
    bytearray(b'\x7f\x49\x49\x49\x41'), # 45 E
    bytearray(b'\x7f\x09\x09\x09\x01'), # 46 F
    bytearray(b'\x3e\x41\x49\x49\x7a'), # 47 G
    bytearray(b'\x7f\x08\x08\x08\x7f'), # 48 H
    bytearray(b'\x00\x41\x7f\x41\x00'), # 49 I
    bytearray(b'\x20\x40\x41\x3f\x01'), # 4a J
    bytearray(b'\x7f\x08\x14\x22\x41'), # 4b K
    bytearray(b'\x7f\x40\x40\x40\x40'), # 4c L
    bytearray(b'\x7f\x02\x0c\x02\x7f'), # 4d M
    bytearray(b'\x7f\x04\x08\x10\x7f'), # 4e N
    bytearray(b'\x3e\x41\x41\x41\x3e'), # 4f O
    bytearray(b'\x7f\x09\x09\x09\x06'), # 50 P
    bytearray(b'\x3e\x41\x51\x21\x5e'), # 51 Q
    bytearray(b'\x7f\x09\x19\x29\x46'), # 52 R
    bytearray(b'\x46\x49\x49\x49\x31'), # 53 S
    bytearray(b'\x01\x01\x7f\x01\x01'), # 54 T
    bytearray(b'\x3f\x40\x40\x40\x3f'), # 55 U
    bytearray(b'\x1f\x20\x40\x20\x1f'), # 56 V
    bytearray(b'\x3f\x40\x38\x40\x3f'), # 57 W
    bytearray(b'\x63\x14\x08\x14\x63'), # 58 X
    bytearray(b'\x07\x08\x70\x08\x07'), # 59 Y
    bytearray(b'\x61\x51\x49\x45\x43'), # 5a Z
    bytearray(b'\x00\x7f\x41\x41\x00'), # 5b [
    bytearray(b'\x02\x04\x08\x10\x20'), # 5c ¥
    bytearray(b'\x00\x41\x41\x7f\x00'), # 5d ]
    bytearray(b'\x04\x02\x01\x02\x04'), # 5e ^
    bytearray(b'\x40\x40\x40\x40\x40'), # 5f _
    bytearray(b'\x00\x01\x02\x04\x00'), # 60 `
    bytearray(b'\x20\x54\x54\x54\x78'), # 61 a
    bytearray(b'\x7f\x48\x44\x44\x38'), # 62 b
    bytearray(b'\x38\x44\x44\x44\x20'), # 63 c
    bytearray(b'\x38\x44\x44\x48\x7f'), # 64 d
    bytearray(b'\x38\x54\x54\x54\x18'), # 65 e
    bytearray(b'\x08\x7e\x09\x01\x02'), # 66 f
    bytearray(b'\x0c\x52\x52\x52\x3e'), # 67 g
    bytearray(b'\x7f\x08\x04\x04\x78'), # 68 h
    bytearray(b'\x00\x44\x7d\x40\x00'), # 69 i
    bytearray(b'\x20\x40\x44\x3d\x00'), # 6a j
    bytearray(b'\x7f\x10\x28\x44\x00'), # 6b k
    bytearray(b'\x00\x41\x7f\x40\x00'), # 6c l
    bytearray(b'\x7c\x04\x18\x04\x78'), # 6d m
    bytearray(b'\x7c\x08\x04\x04\x78'), # 6e n
    bytearray(b'\x38\x44\x44\x44\x38'), # 6f o
    bytearray(b'\x7c\x14\x14\x14\x08'), # 70 p
    bytearray(b'\x08\x14\x14\x18\x7c'), # 71 q
    bytearray(b'\x7c\x08\x04\x04\x08'), # 72 r
    bytearray(b'\x48\x54\x54\x54\x20'), # 73 s
    bytearray(b'\x04\x3f\x44\x40\x20'), # 74 t
    bytearray(b'\x3c\x40\x40\x20\x7c'), # 75 u
    bytearray(b'\x1c\x20\x40\x20\x1c'), # 76 v
    bytearray(b'\x3c\x40\x30\x40\x3c'), # 77 w
    bytearray(b'\x44\x28\x10\x28\x44'), # 78 x
    bytearray(b'\x0c\x50\x50\x50\x3c'), # 79 y
    bytearray(b'\x44\x64\x54\x4c\x44'), # 7a z
    bytearray(b'\x00\x08\x36\x41\x00'), # 7b {
    bytearray(b'\x00\x00\x7f\x00\x00'), # 7c |
    bytearray(b'\x00\x41\x36\x08\x00'), # 7d }
    bytearray(b'\x10\x08\x08\x10\x08'), # 7e ←
    bytearray(b'\x78\x46\x41\x46\x78'), # 7f →
],
"4x4" : [
  bytearray(b'\x00\xB0\x00\x00'), # #32 & #33 - Symbol ' ' (space) & Symbol '!'.
  bytearray(b'\xA1\x70\xE1\x50'), # #34 & #35 - Symbol '"' & Symbol '#'.
  bytearray(b'\x96\x4F\x26\x90'), # #36 & #37 - Symbol '$' & Symbol '%'.
  bytearray(b'\x0F\x1D\x07\x0C'), # #38 & #39 - Symbol '&' & Symbol '''.
  bytearray(b'\x00\x96\x69\x00'), # #40 & #41 - Symbol '(' & Symbol ')'.
  bytearray(b'\x4A\xE4\x4A\x00'), # #42 & #43 - Symbol '*' & Symbol '+'.
  bytearray(b'\x48\x44\x40\x00'), # #44 & #45 - Symbol ',' & Symbol '-'.
  bytearray(b'\x80\x68\x10\x00'), # #46 & #47 - Symbol '.' & Symbol '/'.
  bytearray(b'\x0F\x99\xFB\x8F'), # #48 & #49 - Number '0' & Number '1'.
  bytearray(b'\x9D\xBD\xBB\xFB'), # #50 & #51 - Number '2' & Number '3'.
  bytearray(b'\x77\xD4\xD4\xDF'), # #52 & #53 - Number '4' & Number '5'.
  bytearray(b'\x1F\x1A\x1A\xFE'), # #54 & #55 - Number '6' & Number '7'.
  bytearray(b'\x7F\x5D\x5D\xFF'), # #56 & #57 - Number '8' & Number '9'.
  bytearray(b'\x80\x5A\x00\x00'), # #58 & #59 - Symbol ':' & Symbol ';'.
  bytearray(b'\xA0\xA4\xAA\x00'), # #60 & #61 - Symbol '<' & Symbol '='.
  bytearray(b'\x10\xBA\x34\x00'), # #62 & #63 - Symbol '>' & Symbol '?'.
  bytearray(b'\xFF\x59\x53\xF3'), # #64 & #65 - Symbol '@' & Letter 'A'.
  bytearray(b'\xFF\x9B\x9B\x9E'), # #66 & #67 - Letter 'B' & Letter 'C'.
  bytearray(b'\xFF\xB9\xB9\x96'), # #68 & #69 - Letter 'D' & Letter 'E'.
  bytearray(b'\xFF\x95\x95\xD1'), # #70 & #71 - Letter 'F' & Letter 'G'.
  bytearray(b'\x9F\xF4\x94\x0F'), # #72 & #73 - Letter 'H' & Letter 'I'.
  bytearray(b'\xFC\x29\x5F\x91'), # #74 & #75 - Letter 'J' & Letter 'K'.
  bytearray(b'\xFF\x18\x38\xF8'), # #76 & #77 - Letter 'L' & Letter 'M'.
  bytearray(b'\xFF\x92\x94\xFF'), # #78 & #79 - Letter 'N' & Letter 'O'.
  bytearray(b'\xFF\x95\xD5\xF7'), # #80 & #81 - Letter 'P' & Letter 'Q'.
  bytearray(b'\xBF\xB5\xDD\xD7'), # #82 & #83 - Letter 'R' & Letter 'S'.
  bytearray(b'\xF1\x8F\x81\xF1'), # #84 & #85 - Letter 'T' & Letter 'U'.
  bytearray(b'\xF7\x88\xC8\xF7'), # #86 & #87 - Letter 'V' & Letter 'W'.
  bytearray(b'\x79\xC6\x46\x79'), # #88 & #89 - Letter 'X' & Letter 'Y'.
  bytearray(b'\x09\xFD\x9B\x09'), # #90 & #91 - Letter 'Z' & Symbol '['.
  bytearray(b'\x01\x96\xF8\x00'), # #92 & #93 - Symbol '\' & Symbol ']'.
  bytearray(b'\x82\x81\x82\x80'), # #94 & #95 - Symbol '^' & Symbol '_'.
  bytearray(b'\x50\x71\x62\x00'), # #96 & #97 - Symbol '`' & Letter 'a'.
  bytearray(b'\x77\x56\x56\x00'), # #98 & #99 - Letter 'b' & Letter 'c'.
  bytearray(b'\x76\x76\x37\x00'), # #100 & #101 - Letter 'd' & Letter 'e'.
  bytearray(b'\xA2\xB7\x73\x01'), # #102 & #103 - Letter 'f' & Letter 'g'.
  bytearray(b'\x07\x72\x06\x00'), # #104 & #105 - Letter 'h' & Letter 'i'.
  bytearray(b'\x78\x27\x50\x00'), # #106 & #107 - Letter 'j' & Letter 'k'.
  bytearray(b'\x73\x34\x74\x00'), # #108 & #109 - Letter 'l' & Letter 'm'.
  bytearray(b'\x77\x51\x76\x00'), # #110 & #111 - Letter 'n' & Letter 'o'.
  bytearray(b'\x7F\x55\xF7\x00'), # #112 & #113 - Letter 'p' & Letter 'q'.
  bytearray(b'\x47\x71\x10\x00'), # #114 & #115 - Letter 'r' & Letter 's'.
  bytearray(b'\x32\x47\x72\x00'), # #116 & #117 - Letter 't' & Letter 'u'.
  bytearray(b'\x73\x64\x73\x00'), # #118 & #119 - Letter 'v' & Letter 'w'.
  bytearray(b'\x15\xA2\x75\x00'), # #120 & #121 - Letter 'x' & Letter 'y'.
  bytearray(b'\x61\x67\x94\x00'), # #122 & #123 - Letter 'z' & Symbol '{'.
  bytearray(b'\x00\x9F\x60\x60'), # #124 & #125 - Symbol '|' & Symbol '}'.
  bytearray(b'\xF4\xF2\xF6\xF2'), # #126 & #127 - Symbol '~' & Symbol '■'.
]
}

def split_byte(byte, slice):
    if slice:
        return byte >> 4
    else:
        return byte & bytearray(b'\x0F')[0] 
    

class font_4x4:
    def __init__(self, message):
        self.message = message
    def __iter__(self):
        self.x = 0
        self.y = 0
        self.letter_pos = 0
        return self
    def __next__(self):
        while True:
            if ( self.letter_pos == len(self.message)-1 and self.x == 3 and self.y == 4):
                raise StopIteration
            if ( self.x == 4 ):
                self.x = 0
                self.letter_pos += 1
            if ( self.y == 4 ):
                self.y = 0
                self.x += 1
            self.offset = 1 + (self.letter_pos * 5)
            self.slice = bool((self.message[self.letter_pos] - 32) % 2)
            self.font_index = int(( self.message[self.letter_pos] - 32) / 2)
            #
            self.y += 1
            if ((split_byte(font["4x4"][self.font_index][self.x-1], self.slice) >> self.y-1) & 0x01):
                return ( self.x-1+self.offset, self.y-1, bytearray(b'\xff\x00\x00') )

class font_5x8:
    def __init__(self, message, fgcolor=bytearray(b'\xff\x00\x00')):
        self.message = message
        self.fgcolor = fgcolor
    def __iter__(self):
        self.x = 0
        self.y = 0
        self.letter_pos = 0
        return self
    def __next__(self):
        while True:
            self.offset = 1 + (self.letter_pos * 6)
            if ( self.letter_pos == len(self.message)-1 and self.x == 4 and self.y == 7):
                raise StopIteration
            if ((font["5x8"][self.message[self.letter_pos]-32][self.x] >> self.y) & 0x01):
                retval = (self.x+self.offset, self.y, self.fgcolor)
            else:  
                retval = None
                
            self.y += 1
            if ( self.y == 8 ):
                self.y = 0
                self.x += 1
            if ( self.x == 5 ):
                self.x = 0
                self.letter_pos += 1

            if retval:
                return retval
